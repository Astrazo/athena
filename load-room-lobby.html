<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loading Room - Athena</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="menu-container">
        <h1>Loading Room...</h1>
        <div class="loading-spinner"></div>
    </div>

    <script type="module">
        import { loadRooms } from "./main.js";

        // Get room data from localStorage
        const roomId = localStorage.getItem("connectedRoomId");
        const userId = localStorage.getItem("connectedUserId");
        const roomName = localStorage.getItem("connectedRoomName");
        const username = localStorage.getItem("connectedUsername");

        // Check if we have all required data
        if (!roomId || !userId || !roomName || !username) {
            console.error("Missing required data:", { roomId, userId, roomName, username });
            window.location.href = "index.html";
            throw new Error("Missing required data");
        }

        // Get room data (need to load again as data in local storage may not be up to date when user clicks join)
        try {
            const roomData = await loadRooms(undefined, roomId);
            localStorage.setItem("roomData", JSON.stringify(roomData));
            // Redirect to room lobby
            window.location.href = "room-lobby.html";
        }
        catch (error) {
            console.error("Error loading room:", error);
            window.location.href = "index.html";
        }
    </script>
</body>
</html> 