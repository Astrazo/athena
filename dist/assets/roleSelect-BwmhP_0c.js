import{d as a,u as s}from"./main-3GqDBcTq.js";import"./typewriter-CCdU_-e1.js";const n=localStorage.getItem("connectedRoomId"),o=localStorage.getItem("connectedUserId"),i=localStorage.getItem("connectedRoomName"),d=localStorage.getItem("connectedUsername");JSON.parse(localStorage.getItem("roomData")||"{}");document.getElementById("roomName").textContent=i;function m(e){if(e){document.getElementById("roomName").textContent=`Room: ${e.roomName}`;const t=e.roomPlayers?Object.values(e.roomPlayers):[];document.getElementById("playerCount").textContent=`Players: ${t.length}/4`,document.getElementById("yourName").textContent=`You: ${d}`,t.length>0&&t.every(r=>r.role&&r.role!==null)&&(console.log("All roles selected"),setTimeout(()=>{window.location.href="finalise-roles.html"},2e3))}}function u(){document.querySelector(".button-container").style.display="none",document.getElementById("waitingSection").style.display="block"}function y(){document.querySelector(".button-container").style.display="block",document.getElementById("waitingSection").style.display="none"}function g(e){if(e&&e.roomPlayers){const t=e.roomPlayers[o];return t&&t.role&&t.role!==null}return!1}const c=a(n,e=>{e?(m(e),g(e)?u():y()):(console.error("Room not found"),window.location.href="../index.html")});document.addEventListener("DOMContentLoaded",()=>{});document.querySelectorAll(".role-button").forEach(e=>{e.addEventListener("click",async()=>{({dsBtn:"Data Scientist",seBtn:"Software Engineer",neBtn:"Network Engineer",caBtn:"Cybersecurity Analyst"})[e.id];try{s(o,n,"role",e.id.slice(0,2))}catch(l){console.error("Error in updatePlayer:",l)}})});document.getElementById("changeMindBtn").addEventListener("click",async()=>{s(o,n,"role",null)});window.addEventListener("beforeunload",()=>{c&&c()});
