import{n as u,d as g,g as y,k as b,m as r}from"./main-3GqDBcTq.js";import"./typewriter-CCdU_-e1.js";const p=localStorage.getItem("connectedRoomId"),o=localStorage.getItem("connectedUserId");localStorage.getItem("connectedRoomName");const f=localStorage.getItem("connectedUsername"),I=localStorage.getItem("connectedUserRole");let d=null,n=null,i=null,m=0,c=!0;document.getElementById("back").addEventListener("click",()=>{u("Situation Room")});function w(e){if(e){document.getElementById("roomName").textContent=`Room: ${e.roomName}`;const l=e.roomPlayers?Object.values(e.roomPlayers):[];document.getElementById("playerCount").textContent=`Players: ${l.length}/4`,document.getElementById("yourName").textContent=`You: ${f}`,d=e.roomPlayers[o].enablerComplete,n=e.roomPlayers[o].enabledComplete,i=e.roomPlayers[o].enabledValue!=null,m=e.currentDay}}function R(){var e,l,a;if(c){const t=((a=(l=(e=r)==null?void 0:e[m])==null?void 0:l[I])==null?void 0:a["research-lab"])||null;t===null?typewriter.showSequence(r["WRONG-ROOM"]):t.enabler?d?typewriter.showSequence(t["enabler-complete"]):typewriter.showSequence(t.enabler):t.enabled&&(i&&!n?typewriter.showSequence(t.enabled):n?typewriter.showSequence(t["enabled-complete"]):typewriter.showSequence(t["enabled-not-available"])),c=!1}}const s=g(p,e=>{e?(console.log("Room updated."),w(e),y(e,document.getElementById("players")),b(e,"research-lab",localStorage.getItem("connectedUserRole"),document.getElementById("availableActions")),R()):(console.error("Room not found"),window.location.href="../index.html")});window.addEventListener("beforeunload",()=>{s&&s()});
