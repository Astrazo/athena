import{n as m,d as g,g as y,k as b,m as a}from"./main-3GqDBcTq.js";import"./typewriter-CCdU_-e1.js";const p=localStorage.getItem("connectedRoomId"),l=localStorage.getItem("connectedUserId");localStorage.getItem("connectedRoomName");const f=localStorage.getItem("connectedUsername"),I=localStorage.getItem("connectedUserRole");let d=null,n=null,i=null,u=0,c=!0;document.getElementById("back").addEventListener("click",()=>{m("Situation Room")});function w(e){if(e){document.getElementById("roomName").textContent=`Room: ${e.roomName}`;const o=e.roomPlayers?Object.values(e.roomPlayers):[];document.getElementById("playerCount").textContent=`Players: ${o.length}/4`,document.getElementById("yourName").textContent=`You: ${f}`,d=e.roomPlayers[l].enablerComplete,n=e.roomPlayers[l].enabledComplete,i=e.roomPlayers[l].enabledValue!=null,u=e.currentDay}}function R(){var e,o,r;if(c){const t=((r=(o=(e=a)==null?void 0:e[u])==null?void 0:o[I])==null?void 0:r["developer-hub"])||null;t===null?typewriter.showSequence(a["WRONG-ROOM"]):t.enabler?d?typewriter.showSequence(t["enabler-complete"]):typewriter.showSequence(t.enabler):t.enabled&&(i&&!n?typewriter.showSequence(t.enabled):n?typewriter.showSequence(t["enabled-complete"]):typewriter.showSequence(t["enabled-not-available"])),c=!1}}const s=g(p,e=>{e?(console.log("Room updated."),w(e),y(e,document.getElementById("players")),b(e,"developer-hub",localStorage.getItem("connectedUserRole"),document.getElementById("availableActions")),R()):(console.error("Room not found"),window.location.href="../index.html")});window.addEventListener("beforeunload",()=>{s&&s()});
