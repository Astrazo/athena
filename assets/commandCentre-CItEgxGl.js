import{n as g,d as y,g as b,k as p,m as s}from"./main-3GqDBcTq.js";import"./typewriter-CCdU_-e1.js";const f=localStorage.getItem("connectedRoomId"),n=localStorage.getItem("connectedUserId");localStorage.getItem("connectedRoomName");const I=localStorage.getItem("connectedUsername"),d=localStorage.getItem("connectedUserRole");let i=null,c=null,u=null,a=0,l=!0;document.getElementById("back").addEventListener("click",()=>{g("Situation Room")});function w(e){if(e){document.getElementById("roomName").textContent=`Room: ${e.roomName}`;const t=e.roomPlayers?Object.values(e.roomPlayers):[];document.getElementById("playerCount").textContent=`Players: ${t.length}/4`,document.getElementById("yourName").textContent=`You: ${I}`,i=e.roomPlayers[n].enablerComplete,c=e.roomPlayers[n].enabledComplete,u=e.roomPlayers[n].enabledValue!=null,a=e.currentDay}}function R(){var e,t,r;if(l){const o=((r=(t=(e=s)==null?void 0:e[a])==null?void 0:t[d])==null?void 0:r["command-centre"])||null;console.log(`${a}${d}`),o===null?typewriter.showSequence(s["WRONG-ROOM"]):o.enabler?i?typewriter.showSequence(o["enabler-complete"]):typewriter.showSequence(o.enabler):o.enabled&&(u&&!c?typewriter.showSequence(o.enabled):c?typewriter.showSequence(o["enabled-complete"]):typewriter.showSequence(o["enabled-not-available"])),l=!1,console.log(l)}}const m=y(f,e=>{e?(console.log("Room updated."),w(e),b(e,document.getElementById("players")),p(e,"command-centre",localStorage.getItem("connectedUserRole"),document.getElementById("availableActions")),R()):(console.error("Room not found"),window.location.href="../index.html")});window.addEventListener("beforeunload",()=>{m&&m()});
